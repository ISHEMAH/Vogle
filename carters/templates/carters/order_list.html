<!-- carters/templates/carters/order_list.html -->
{% extends 'carters/base.html' %}
{% block content %}
<div class="p-6">
    <div class="flex justify-between items-center">
        <h1 class="text-3xl font-bold mb-5">Catering Orders</h1>
        <a href="{% url 'order_create' %}" class="bg-[#FC4B37] text-white px-4 py-2 rounded hover:bg-red-600 transition">Add New Order</a>
    </div>
    <table class="min-w-full bg-white rounded shadow overflow-hidden">
        <thead class="bg-[#FC4B37] text-white">
            <tr>
                <th class="px-4 py-2">Client Name</th>
                <th class="px-4 py-2">Event Date</th>
                <th class="px-4 py-2">Order Status</th>
                <th class="px-4 py-2">Total Cost</th>
                <th class="px-4 py-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr class="border-b hover:bg-gray-100 transition">
                <td class="px-4 py-2">{{ order.client_name }}</td>
                <td class="px-4 py-2">{{ order.event_date }}</td>
                <td class="px-4 py-2">{{ order.order_status }}</td>
                <td class="px-4 py-2">{{ order.total_cost }}</td>
                <td class="px-4 py-2">
                    <a href="{% url 'order_update' order.pk %}" class="text-blue-600 hover:underline">Edit</a> |
                    <button onclick="openModal('orderModal{{ order.pk }}')" class="text-red-600 hover:underline">Delete</button>
                </td>
            </tr>
            <!-- Delete Modal -->
            <div id="orderModal{{ order.pk }}" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
                <div class="bg-white p-6 rounded shadow-lg">
                    <h2 class="text-xl font-semibold mb-4">Confirm Delete</h2>
                    <p>Are you sure you want to delete this order?</p>
                    <div class="mt-4 flex justify-end">
                        <button onclick="closeModal('orderModal{{ order.pk }}')" class="mr-2 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancel</button>
                        <form method="POST" action="{% url 'order_delete' order.pk %}">
                            {% csrf_token %}
                            <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Include Modal Script -->
<script>
    function openModal(modalId) {
        document.getElementById(modalId).classList.remove('hidden');
    }
    function closeModal(modalId) {
        document.getElementById(modalId).classList.add('hidden');
    }
</script>
{% endblock %}
